#:kivy 2.3.0

<DateInput@BoxLayout>:
    orientation: "horizontal"
    spacing: dp(8)
    size_hint_y: None
    height: dp(40)
    Label:
        text: root.label_text if hasattr(root, 'label_text') else "날짜"
        font_name: "NanumGothic"
        size_hint_x: 0.35
        halign: "left"
        valign: "middle"
        text_size: self.size
    TextInput:
        id: ti
        hint_text: "YYYY-MM-DD"
        font_name: "NanumGothic"
        multiline: False
        write_tab: False
        size_hint_x: 0.65
        input_filter: None

<DaysInput@BoxLayout>:
    orientation: "horizontal"
    spacing: dp(8)
    size_hint_y: None
    height: dp(40)
    Label:
        text: root.label_text if hasattr(root, 'label_text') else "일수"
        font_name: "NanumGothic"
        size_hint_x: 0.35
        halign: "left"
        valign: "middle"
        text_size: self.size
    TextInput:
        id: ti
        hint_text: "정수 일수 (예: 30)"
        font_name: "NanumGothic"
        multiline: False
        write_tab: False
        size_hint_x: 0.65
        input_filter: "int"

<NavBar@BoxLayout>:
    size_hint_y: None
    height: dp(48)
    spacing: dp(8)
    padding: dp(8)
    # HoverLabel과 LongPressButton을 사용
    LongPressButton:
        text: "두 날짜 간 일수"
        font_name: "NanumGothic"
        on_release: app.switch_screen("days_between")
    LongPressButton:
        text: "특정일 기준 +N일"
        font_name: "NanumGothic"
        on_release: app.switch_screen("days_after")
    LongPressButton:
        text: "특정일 기준 −N일"
        font_name: "NanumGothic"
        on_release: app.switch_screen("days_before")

ScreenManager:
    id: sm

    Screen:
        name: "days_between"
        BoxLayout:
            orientation: "vertical"
            NavBar:
            HoverLabel:
                text: "예: 2025-01-01 ~ 2025-01-31 => 총 31일\n시작일과 종료일을 입력하면 사이의 일수를 계산합니다."
                font_name: "NanumGothic"
                size_hint_y: None
                height: dp(60)
            BoxLayout:
                orientation: "vertical"
                padding: dp(12)
                spacing: dp(8)
                DateInput:
                    id: start_date
                    label_text: "시작 날짜"
                DateInput:
                    id: end_date
                    label_text: "종료 날짜"
                BoxLayout:
                    size_hint_y: None
                    height: dp(44)
                    spacing: dp(8)
                    LongPressButton:
                        text: "계산하기"
                        font_name: "NanumGothic"
                        on_release: app.calc_days_between(start_date.children[0].text, end_date.children[0].text)
                    LongPressButton:
                        text: "초기화"
                        font_name: "NanumGothic"
                        on_release:
                            start_date.children[0].text = ""
                            end_date.children[0].text = ""
                            result_between.text = ""
                Label:
                    id: result_between
                    text: ""
                    font_name: "NanumGothic"
                    color: 1,1,1,1
                    size_hint_y: None
                    height: dp(32)

    Screen:
        name: "days_after"
        BoxLayout:
            orientation: "vertical"
            NavBar:
            HoverLabel:
                text: "예: 시작일 2025-01-01, +10일 => 결과: 2025-01-11\n기준 날짜와 ‘며칠 후’를 입력하면 해당 날짜를 알려드립니다."
                font_name: "NanumGothic"
                size_hint_y: None
                height: dp(60)
            BoxLayout:
                orientation: "vertical"
                padding: dp(12)
                spacing: dp(8)
                DateInput:
                    id: base_after
                    label_text: "기준 날짜"
                DaysInput:
                    id: days_after_in
                    label_text: "일수"
                BoxLayout:
                    size_hint_y: None
                    height: dp(44)
                    spacing: dp(8)
                    LongPressButton:
                        text: "계산하기"
                        font_name: "NanumGothic"
                        on_release: app.calc_days_after(base_after.children[0].text, days_after_in.children[0].text)
                    LongPressButton:
                        text: "초기화"
                        font_name: "NanumGothic"
                        on_release:
                            base_after.children[0].text = ""
                            days_after_in.children[0].text = ""
                            result_after.text = ""
                Label:
                    id: result_after
                    text: ""
                    font_name: "NanumGothic"
                    color: 1,1,1,1
                    size_hint_y: None
                    height: dp(32)

    Screen:
        name: "days_before"
        BoxLayout:
            orientation: "vertical"
            NavBar:
            HoverLabel:
                text: "예: 시작일 2025-01-15, -5일 => 결과: 2025-01-10\n기준 날짜와 ‘며칠 전’을 입력하면 해당 날짜를 알려드립니다."
                font_name: "NanumGothic"
                size_hint_y: None
                height: dp(60)
            BoxLayout:
                orientation: "vertical"
                padding: dp(12)
                spacing: dp(8)
                DateInput:
                    id: base_before
                    label_text: "기준 날짜"
                DaysInput:
                    id: days_before_in
                    label_text: "일수"
                BoxLayout:
                    size_hint_y: None
                    height: dp(44)
                    spacing: dp(8)
                    LongPressButton:
                        text: "계산하기"
                        font_name: "NanumGothic"
                        on_release: app.calc_days_before(base_before.children[0].text, days_before_in.children[0].text)
                    LongPressButton:
                        text: "초기화"
                        font_name: "NanumGothic"
                        on_release:
                            base_before.children[0].text = ""
                            days_before_in.children[0].text = ""
                            result_before.text = ""
                Label:
                    id: result_before
                    text: ""
                    font_name: "NanumGothic"
                    color: 1,1,1,1
                    size_hint_y: None
                    height: dp(32)
